
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<script>
function goback() {
	window.history.back();
}

function parse_json() {
	try{
	var json = JSON.parse({{parsed_json|tojson}});
	var jsonpretty = JSON.stringify(json, undefined, 2);
	var labelpretty = document.getElementById("jsonpretty");
	labelpretty.innerHTML = jsonpretty;
	labelpretty.hidden = false;
	}catch(err) {

	}
}

function get_table() {
	request = new XMLHttpRequest();
	request.open("POST", "/geteventtable", true);
	request.onreadystatechange = display_table;
	request.send(null);

}

function display_table() {
	if (request.readyState == 4 && request.status == 200) {
            unparsed_json = JSON.parse(request.responseText);
            var table = document.getElementById("eventTable");

            for (var i = 0; i < unparsed_json.length; i++) {
                var row = table.insertRow(i+1);
                var name = row.insertCell(0);
                name.innerHTML = unparsed_json[i].name;

                var desc = row.insertCell(1);
                desc.innerHTML = unparsed_json[i].description;

                var analystComments = row.insertCell(2);
                analystComments.innerHTML = unparsed_json[i].AnalystComments;
            }


	}

}

window.onload = function(){
parse_json();
get_table();

};

</script>

<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand">Giant</a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="home.html">Home</a></li>
      <li><a href="displayip.html">Ip Info</a></li>
      <li><a href="displaydomain.html">Who Is</a></li>
      <li><a href="displaywhatis.html">What Is</a></li>
	  <li class="active"><a href="displayevent.html">Event</a></li>
    </ul>
  </div>
</nav>

<form action="/event" method="post">
  <div class="container">
    <h1>Event</h1>
    <p>Enter name:</p>
      <input type="text" name="name"><br>
    <p>Enter description:</p>
      <input type="text" name="description"><br>
    <p>Enter comments:</p>
      <input type="text" name="AnalystComments"><br>
    <button type="submit" value="Submit" class="btn btn-default">Submit</button>
  </div>
</form>

<pre hidden='hidden' id = "jsonpretty"></pre>

<div class="table-responsive">
<table id="eventTable" class="table">
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Analyst Comments</th>
    </tr>
</table>
    </div>

 
</body>
